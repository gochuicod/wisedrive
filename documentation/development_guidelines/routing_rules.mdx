# Routing Rules in Next.js Projects

Routing is a critical aspect of any web application, especially when dealing with internationalization and scalable architectures. In this documentation, we explore the routing rules and best practices for managing routes in a Next.js application that leverages internationalization and component-driven development.

<Tip>Adhering to the routing guidelines ensures a clean and maintainable codebase.</Tip>

## Project Structure and Routing

In a Next.js project, especially one that is scalable and supports multiple locales, it is crucial to follow a structured approach to routing. The project structure is designed to separate concerns and maintain a clean architecture.

```bash
.
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ [locale]/ # ğŸŒ All pages live here (Dynamic Routing)
â”‚ â”‚ â”œâ”€â”€ layout.tsx # Root Layout (Server Component)
â”‚ â”‚ â””â”€â”€ page.tsx # Homepage
â”‚ â””â”€â”€ globals.css # ğŸ¨ Global styles & Theme Variables
â”œâ”€â”€ components/
â”‚ â””â”€â”€ ui/ # ğŸ§© Shared Shadcn UI components (Button, Input)
â”œâ”€â”€ i18n/ # âš™ï¸ i18n Configuration
â”‚ â”œâ”€â”€ request.ts # Server-side message loading
â”‚ â””â”€â”€ routing.ts # Locale definitions (en, my, th)
â”œâ”€â”€ messages/ # ğŸ—£ Translation JSON files
â”‚ â”œâ”€â”€ en.json
â”‚ â”œâ”€â”€ my.json
â”‚ â””â”€â”€ th.json
â”œâ”€â”€ lib/ # ğŸ§° Utility functions (cn, formatters)
â”œâ”€â”€ middleware.ts # ğŸš¦ Locale redirection middleware
â””â”€â”€ next.config.ts # Next.js config with i18n plugin
```

<Info>All routes must reside inside the `app/[locale]/` directory to enable dynamic routing based on locale.</Info>

## Asynchronous Route Parameters

In Next.js 15, route parameters are asynchronous. This means you need to handle them appropriately in your components to ensure the correct data is loaded.

### Example Usage

```javascript
export default async function Page({ params }: { params: Promise<{ locale: string }> }) {
const { locale } = await params;
// ...
}
```

<Warning>Always await the route parameters to prevent runtime errors and ensure data consistency.</Warning>

## Development Guidelines

Following a set of guidelines helps maintain a clean history and a robust codebase.

### Commit Convention

We adhere to the Conventional Commits specification, which provides a consistent way to structure commit messages.

| Type | Meaning | Example |
| :--- | :--- | :--- |
| **feat** | A new feature | `feat(ui): add dark mode toggle` |
| **fix** | A bug fix | `fix(auth): resolve login redirect loop` |
| **chore** | Maintenance/Config | `chore(deps): upgrade next-intl` |
| **style** | UI/CSS changes (no logic) | `style(home): adjust hero padding` |
| **refactor** | Code change (no feature/fix) | `refactor(utils): simplify date format` |
| **test** | Adding or fixing tests | `test(auth): add unit tests for login` |
| **perf** | Performance improvements | `perf(image): optimize logo loading` |
| **build** | Build system/dependency updates | `build(npm): update lockfile` |
| **revert** | Reverting a previous commit | `revert: restore previous navbar layout` |
| **docs** | Documentation only | `docs: update readme rules` |
| **ci** | CI/CD changes | `ci: update vercel build settings` |
| **types** | TypeScript-only changes | `types(auth): tighten user session types` |
| **i18n** | Translation / localization changes | `i18n(home): add Thai hero translations` |
| **ui** | Component-level UI changes | `ui(form): add reusable form field wrapper` |
| **security** | Security-related changes | `security(auth): prevent session fixation` |

<Info>Adopting a commit convention helps in tracking changes and understanding the history of the project.</Info>

## Conclusion

By following these routing rules and development guidelines, you can ensure that your Next.js project remains scalable, maintainable, and easy to work with. Remember to always await asynchronous route parameters and adhere to the commit conventions for a clean project history.

<Tip>Regularly review and update your routing and development practices to align with the latest best practices.</Tip>
