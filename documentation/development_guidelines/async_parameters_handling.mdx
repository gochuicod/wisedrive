# Async Parameters Handling in Next.js

Welcome to the comprehensive guide on handling asynchronous parameters in a Next.js project. This documentation is crafted to help developers understand the nuances of working with asynchronous route parameters in Next.js 15, ensuring optimal performance and maintainability in your applications.

<Info>This guide assumes familiarity with Next.js and TypeScript. If you're new to the platform, consider starting with a basic setup guide.</Info>

## Understanding Async Parameters

In Next.js 15, route parameters are asynchronous by design. This means that when you're working with pages and layouts, you must handle these parameters using asynchronous patterns. This approach is crucial for projects that leverage dynamic routing and internationalization.

### Correct Usage of Async Parameters

When defining a page or layout in Next.js, ensure you await the parameters as demonstrated in the example below:

```typescript
// Correct usage in Layout/Page
export default async function Page({ params }: { params: Promise<{ locale: string }> }) {
const { locale } = await params;
// Additional logic here...
}
```

<Warning>Failing to await parameters can lead to unexpected behavior and runtime errors.</Warning>

## Project Structure and Routing

Next.js projects are structured to support scalability and internationalization. Here's a glimpse into the recommended project structure:

```bash
.
â”œâ”€â”€ app/
â”‚ â”œâ”€â”€ [locale]/ # ğŸŒ All pages live here (Dynamic Routing)
â”‚ â”‚ â”œâ”€â”€ layout.tsx # Root Layout (Server Component)
â”‚ â”‚ â””â”€â”€ page.tsx # Homepage
â”‚ â””â”€â”€ globals.css # ğŸ¨ Global styles & Theme Variables
â”œâ”€â”€ components/
â”‚ â””â”€â”€ ui/ # ğŸ§© Shared Shadcn UI components (Button, Input)
â”œâ”€â”€ i18n/ # âš™ï¸ i18n Configuration
â”‚ â”œâ”€â”€ request.ts # Server-side message loading
â”‚ â””â”€â”€ routing.ts # Locale definitions (en, my, th)
â”œâ”€â”€ messages/ # ğŸ—£ Translation JSON files
â”‚ â”œâ”€â”€ en.json
â”‚ â”œâ”€â”€ my.json
â”‚ â””â”€â”€ th.json
â”œâ”€â”€ lib/ # ğŸ§° Utility functions (cn, formatters)
â”œâ”€â”€ middleware.ts # ğŸš¦ Locale redirection middleware
â””â”€â”€ next.config.ts # Next.js config with i18n plugin
```

<Info>All routes should be defined within the `app/[locale]/` directory to support locale-based dynamic routing.</Info>

## Development Guidelines

To maintain a clean and organized codebase, adhere to the following commit conventions:

| Type | Meaning | Example |
| ---------- | --------------------------------------- | ------------------------------------- |
| **feat** | A new feature | `feat(ui): add dark mode toggle` |
| **fix** | A bug fix | `fix(auth): resolve login redirect loop` |
| **chore** | Maintenance/Config | `chore(deps): upgrade next-intl` |
| **style** | UI/CSS changes (no logic) | `style(home): adjust hero padding` |
| **refactor** | Code change (no feature/fix) | `refactor(utils): simplify date format` |
| **test** | Adding or fixing tests | `test(auth): add unit tests for login` |
| **perf** | Performance improvements | `perf(image): optimize logo loading` |
| **build** | Build system/dependency updates | `build(npm): update lockfile` |
| **revert** | Reverting a previous commit | `revert: restore previous navbar layout` |
| **docs** | Documentation only | `docs: update readme rules` |
| **ci** | CI/CD changes | `ci: update vercel build settings` |
| **types** | TypeScript-only changes | `types(auth): tighten user session types` |
| **i18n** | Translation / localization changes | `i18n(home): add Thai hero translations` |
| **ui** | Component-level UI changes | `ui(form): add reusable form field wrapper` |
| **security** | Security-related changes | `security(auth): prevent session fixation` |

<Tip>Following these conventions helps in maintaining a coherent commit history and facilitates easier code reviews.</Tip>

## Conclusion

Handling async parameters in Next.js is a vital skill for developers building scalable and internationalized applications. By adhering to the guidelines outlined in this document, you can ensure that your Next.js projects are both performant and maintainable.

<Note>For more details on Next.js features and updates, refer to the official [Next.js documentation](https://nextjs.org/docs).</Note>
